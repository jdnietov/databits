<template name="cards">
  {{#unless steps}}
    <div class="text">
      ¡No tienes todavía lugares para tu itinerario!<br>
      Selecciona uno de los lugares disponibles o crea tu propio lugar y haz clic en <b>Agregar</b> para adicionarlo.
    </div>
  {{/unless}}

  <div id="sortable-cards">
    {{#each steps}}
    <div class="ui link {{this.type}} card" style="width: 100%;" data-step="{{@index}}">
      <div class="main content">
        <i class="right floated remove icon" data-step="{{@index}}"></i>
        <i class="right floated angle down icon" data-step="{{@index}}"></i>
        <i class="right floated angle up icon" data-step="{{@index}}"></i>
        <i class="right floated move icon"></i>
        <div class="header">{{getIndex @index}}. {{this.name}}</div>
        <div class="meta">{{beautifyType this.type}}</div>
      </div>
      <div class="extra content">
        <b>{{this.address}}</b>
        <span class="right floated" style="color: green; font-size: 1.3em">
          <b>$ {{this.price}}</b>
        </span>
      </div>
      <div class="extra content">
        <b>Tiempo promedio</b>
        <span class="right floated" style="color: green; font-size: 1.3em">
          <b>{{this.time}}</b>
        </span>
      </div>
    </div>
    {{/each}}
  </div>

  <div class="ui green message">
    Precio Total: $ {{totalPrice}}<br>
    Tiempo total: {{totalTime}}
  </div>

  {{#if steps}}
  <div class="ui green end steps button">
    Finalizar
  </div>
  {{/if}}
</template>

<template name="cardsModal">
  <div class="header">
    Finalizar tu itinerario
  </div>
  <div class="content">
    <div class="description">
      <p>
        Verifica lo que ingresaste. <b>¿Es éste tu itinerario?</b>
      </p>

      <div class="ui divided items">
        {{#each steps}}
        <div class="item">
          <div class="image" style="width:20px; margin-top:10px;">
            <img class="ui left floated image" src="/markers/{{getPinImgName this.type}}-pin.png" style="width:20px;">
          </div>
          <div class="content">
            <div class="{{this.type}} meta">
              {{beautifyType this.type}}
            </div>
            <div class="header">
               {{this.name}}
            </div>
            <div class="description">
              ${{this.price}} - {{this.hours}}h {{this.minutes}}m de recorrido
            </div>
          </div>
        </div>
        {{/each}}
        <div class="item">
          <div class="content">
            <div class="header">
               Total: ${{totalPrice}}
            </div>
          </div>
        </div>
      </div>

      <p>
        Si este realmente es tu itinerario, ingresa aquí un correo electrónico
        a donde podamos enviarlo para llevarlo a donde necesites.
      </p>

      <form class="ui form">
        <div class="field">
          <input type="text" class="ui send email input" placeholder="Correo electrónico...">
          {{#if isEmailInvalid}}
          <div class="ui pointing red basic label">
            Ingresa un correo electrónico válido (ej. micorreo@electronico.com).
          </div>
          {{/if}}
        </div>
      </form>

      <div class="ui yep positive right labeled icon button right floated">
        Agregar Itinerario
        <i class="checkmark icon"></i>
      </div>
    </div>
  </div>
</template>
